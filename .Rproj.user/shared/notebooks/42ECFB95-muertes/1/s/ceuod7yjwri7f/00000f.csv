"0","reticulate::repl_python()"
"0","#| output: false"
"0","#| include: false"
"0",""
"0","import numpy as np "
"0","import pandas as pd "
"0","import plotly.express as px "
"0","from statsmodels.tsa.holtwinters import ExponentialSmoothing"
"0",""
"0","# Importación de los datos de CASOS DE MUERTE del 20-02-2020 al 15-08-2020"
"0","data = pd.read_excel('muertes.xlsx')"
"0","df = pd.DataFrame(data)"
"0"," "
"0","# ---------- Predicción de los próximos 30 días ----------"
"0","# Configurar el modelo Holt-Winters"
"0","model = ExponentialSmoothing(df['Deaths'], trend='add', seasonal='add', seasonal_periods=14)"
"0","model_fit = model.fit(optimized=True)"
"0",""
"0","# Generar predicciones"
"0","forecast_days = 30  # Número de días a predecir"
"0","forecast = model_fit.forecast(steps=forecast_days)"
"0",""
"0","# Crear un DataFrame con las fechas de predicción"
"0","forecast_dates = pd.date_range(start=df['Date'].max() + pd.Timedelta(days=1), periods=forecast_days, freq='D')"
"0",""
"0","# Agregar las fechas y valores predichos al DataFrame original"
"0","forecast_df = pd.DataFrame({'Date': forecast_dates, 'Forecast': forecast})"
"0","df_t = pd.concat([df, forecast_df])"
"0",""
"0","# Crear una gráfica interactiva con Plotly"
"0","fig = px.line(df, x='Date', y='Deaths', title='Holt-Winters Forecast', labels={'Deaths': 'Deaths'})"
"0","fig.add_scatter(x=forecast_dates, y=forecast, mode='lines', name='Forecast', line=dict(color='red'))"
"1","Figure({
    'data': [{'hovertemplate': 'Date=%{x}<br>Deaths=%{y}<extra></extra>',
              'legendgroup': '',
              'line': {'color': '#636efa', 'dash': 'solid'},
              'marker': {'symbol': 'circle'},
              'mode': 'lines',
              'name': '',
              'orientation': 'v',
              'showlegend': False,
              'type': 'scatter',
              'x': array([datetime.datetime(2020, 2, 20, 0, 0),
                          datetime.datetime(2020, 2, 21"
"1",", 0, 0),
                          datetime.datetime(2020, 2, 22, 0, 0),
                          datetime.datetime(2020, 2, 23, 0, 0),
                          datetime.datetime(2020, 2, 24, 0, 0),
                          datetime.datetime(2020, 2, 25, 0, 0),
                          datetime.datetime(2020, 2, 26, 0, 0),
                          datetime.datetime(2020, 2, 27, 0, 0),
                          datetime.datetime(2020, 2, 28, 0, 0),
                          datetime.datetime(202"
"1","0, 2, 29, 0, 0),
                          datetime.datetime(2020, 3, 1, 0, 0),
                          datetime.datetime(2020, 3, 2, 0, 0),
                          datetime.datetime(2020, 3, 3, 0, 0),
                          datetime.datetime(2020, 3, 4, 0, 0),
                          datetime.datetime(2020, 3, 5, 0, 0),
                          datetime.datetime(2020, 3, 6, 0, 0),
                          datetime.datetime(2020, 3, 7, 0, 0),
                          datetime.datetime(20"
"1","20, 3, 8, 0, 0),
                          datetime.datetime(2020, 3, 9, 0, 0),
                          datetime.datetime(2020, 3, 10, 0, 0),
                          datetime.datetime(2020, 3, 11, 0, 0),
                          datetime.datetime(2020, 3, 12, 0, 0),
                          datetime.datetime(2020, 3, 13, 0, 0),
                          datetime.datetime(2020, 3, 14, 0, 0),
                          datetime.datetime(2020, 3, 15, 0, 0),
                          datetime.datet"
"1","ime(2020, 3, 16, 0, 0),
                          datetime.datetime(2020, 3, 17, 0, 0),
                          datetime.datetime(2020, 3, 18, 0, 0),
                          datetime.datetime(2020, 3, 19, 0, 0),
                          datetime.datetime(2020, 3, 20, 0, 0),
                          datetime.datetime(2020, 3, 21, 0, 0),
                          datetime.datetime(2020, 3, 22, 0, 0),
                          datetime.datetime(2020, 3, 23, 0, 0),
                          dateti"
"1","me.datetime(2020, 3, 24, 0, 0),
                          datetime.datetime(2020, 3, 25, 0, 0),
                          datetime.datetime(2020, 3, 26, 0, 0),
                          datetime.datetime(2020, 3, 27, 0, 0),
                          datetime.datetime(2020, 3, 28, 0, 0),
                          datetime.datetime(2020, 3, 29, 0, 0),
                          datetime.datetime(2020, 3, 30, 0, 0),
                          datetime.datetime(2020, 3, 31, 0, 0),
                        "
"1","  datetime.datetime(2020, 4, 1, 0, 0),
                          datetime.datetime(2020, 4, 2, 0, 0),
                          datetime.datetime(2020, 4, 3, 0, 0),
                          datetime.datetime(2020, 4, 4, 0, 0),
                          datetime.datetime(2020, 4, 5, 0, 0),
                          datetime.datetime(2020, 4, 6, 0, 0),
                          datetime.datetime(2020, 4, 7, 0, 0),
                          datetime.datetime(2020, 4, 8, 0, 0),
                        "
"1","  datetime.datetime(2020, 4, 9, 0, 0),
                          datetime.datetime(2020, 4, 10, 0, 0),
                          datetime.datetime(2020, 4, 11, 0, 0),
                          datetime.datetime(2020, 4, 12, 0, 0),
                          datetime.datetime(2020, 4, 13, 0, 0),
                          datetime.datetime(2020, 4, 14, 0, 0),
                          datetime.datetime(2020, 4, 15, 0, 0),
                          datetime.datetime(2020, 4, 16, 0, 0),
                 "
"1","         datetime.datetime(2020, 4, 17, 0, 0),
                          datetime.datetime(2020, 4, 18, 0, 0),
                          datetime.datetime(2020, 4, 19, 0, 0),
                          datetime.datetime(2020, 4, 20, 0, 0),
                          datetime.datetime(2020, 4, 21, 0, 0),
                          datetime.datetime(2020, 4, 22, 0, 0),
                          datetime.datetime(2020, 4, 23, 0, 0),
                          datetime.datetime(2020, 4, 24, 0, 0),
         "
"1","                 datetime.datetime(2020, 4, 25, 0, 0),
                          datetime.datetime(2020, 4, 26, 0, 0),
                          datetime.datetime(2020, 4, 27, 0, 0),
                          datetime.datetime(2020, 4, 28, 0, 0),
                          datetime.datetime(2020, 4, 29, 0, 0),
                          datetime.datetime(2020, 4, 30, 0, 0),
                          datetime.datetime(2020, 5, 1, 0, 0),
                          datetime.datetime(2020, 5, 2, 0, 0),
   "
"1","                       datetime.datetime(2020, 5, 3, 0, 0),
                          datetime.datetime(2020, 5, 4, 0, 0),
                          datetime.datetime(2020, 5, 5, 0, 0),
                          datetime.datetime(2020, 5, 6, 0, 0),
                          datetime.datetime(2020, 5, 7, 0, 0),
                          datetime.datetime(2020, 5, 8, 0, 0),
                          datetime.datetime(2020, 5, 9, 0, 0),
                          datetime.datetime(2020, 5, 10, 0, 0),
  "
"1","                        datetime.datetime(2020, 5, 11, 0, 0),
                          datetime.datetime(2020, 5, 12, 0, 0),
                          datetime.datetime(2020, 5, 13, 0, 0),
                          datetime.datetime(2020, 5, 14, 0, 0),
                          datetime.datetime(2020, 5, 15, 0, 0),
                          datetime.datetime(2020, 5, 16, 0, 0),
                          datetime.datetime(2020, 5, 17, 0, 0),
                          datetime.datetime(2020, 5, 18, 0,"
"1"," 0),
                          datetime.datetime(2020, 5, 19, 0, 0),
                          datetime.datetime(2020, 5, 20, 0, 0),
                          datetime.datetime(2020, 5, 21, 0, 0),
                          datetime.datetime(2020, 5, 22, 0, 0),
                          datetime.datetime(2020, 5, 23, 0, 0),
                          datetime.datetime(2020, 5, 24, 0, 0),
                          datetime.datetime(2020, 5, 25, 0, 0),
                          datetime.datetime(2020, 5"
"1",", 26, 0, 0),
                          datetime.datetime(2020, 5, 27, 0, 0),
                          datetime.datetime(2020, 5, 28, 0, 0),
                          datetime.datetime(2020, 5, 29, 0, 0),
                          datetime.datetime(2020, 5, 30, 0, 0),
                          datetime.datetime(2020, 5, 31, 0, 0),
                          datetime.datetime(2020, 6, 1, 0, 0),
                          datetime.datetime(2020, 6, 2, 0, 0),
                          datetime.datetime(2"
"1","020, 6, 3, 0, 0),
                          datetime.datetime(2020, 6, 4, 0, 0),
                          datetime.datetime(2020, 6, 5, 0, 0),
                          datetime.datetime(2020, 6, 6, 0, 0),
                          datetime.datetime(2020, 6, 7, 0, 0),
                          datetime.datetime(2020, 6, 8, 0, 0),
                          datetime.datetime(2020, 6, 9, 0, 0),
                          datetime.datetime(2020, 6, 10, 0, 0),
                          datetime.datetime("
"1","2020, 6, 11, 0, 0),
                          datetime.datetime(2020, 6, 12, 0, 0),
                          datetime.datetime(2020, 6, 13, 0, 0),
                          datetime.datetime(2020, 6, 14, 0, 0),
                          datetime.datetime(2020, 6, 15, 0, 0),
                          datetime.datetime(2020, 6, 16, 0, 0),
                          datetime.datetime(2020, 6, 17, 0, 0),
                          datetime.datetime(2020, 6, 18, 0, 0),
                          datetime.d"
"1","atetime(2020, 6, 19, 0, 0),
                          datetime.datetime(2020, 6, 20, 0, 0),
                          datetime.datetime(2020, 6, 21, 0, 0),
                          datetime.datetime(2020, 6, 22, 0, 0),
                          datetime.datetime(2020, 6, 23, 0, 0),
                          datetime.datetime(2020, 6, 24, 0, 0),
                          datetime.datetime(2020, 6, 25, 0, 0),
                          datetime.datetime(2020, 6, 26, 0, 0),
                          da"
"1","tetime.datetime(2020, 6, 27, 0, 0),
                          datetime.datetime(2020, 6, 28, 0, 0),
                          datetime.datetime(2020, 6, 29, 0, 0),
                          datetime.datetime(2020, 6, 30, 0, 0),
                          datetime.datetime(2020, 7, 1, 0, 0),
                          datetime.datetime(2020, 7, 2, 0, 0),
                          datetime.datetime(2020, 7, 3, 0, 0),
                          datetime.datetime(2020, 7, 4, 0, 0),
                        "
"1","  datetime.datetime(2020, 7, 5, 0, 0),
                          datetime.datetime(2020, 7, 6, 0, 0),
                          datetime.datetime(2020, 7, 7, 0, 0),
                          datetime.datetime(2020, 7, 8, 0, 0),
                          datetime.datetime(2020, 7, 9, 0, 0),
                          datetime.datetime(2020, 7, 10, 0, 0),
                          datetime.datetime(2020, 7, 11, 0, 0),
                          datetime.datetime(2020, 7, 12, 0, 0),
                     "
"1","     datetime.datetime(2020, 7, 13, 0, 0),
                          datetime.datetime(2020, 7, 14, 0, 0),
                          datetime.datetime(2020, 7, 15, 0, 0),
                          datetime.datetime(2020, 7, 16, 0, 0),
                          datetime.datetime(2020, 7, 17, 0, 0),
                          datetime.datetime(2020, 7, 18, 0, 0),
                          datetime.datetime(2020, 7, 19, 0, 0),
                          datetime.datetime(2020, 7, 20, 0, 0),
             "
"1","             datetime.datetime(2020, 7, 21, 0, 0),
                          datetime.datetime(2020, 7, 22, 0, 0),
                          datetime.datetime(2020, 7, 23, 0, 0),
                          datetime.datetime(2020, 7, 24, 0, 0),
                          datetime.datetime(2020, 7, 25, 0, 0),
                          datetime.datetime(2020, 7, 26, 0, 0),
                          datetime.datetime(2020, 7, 27, 0, 0),
                          datetime.datetime(2020, 7, 28, 0, 0),
     "
"1","                     datetime.datetime(2020, 7, 29, 0, 0),
                          datetime.datetime(2020, 7, 30, 0, 0),
                          datetime.datetime(2020, 7, 31, 0, 0),
                          datetime.datetime(2020, 8, 1, 0, 0),
                          datetime.datetime(2020, 8, 2, 0, 0),
                          datetime.datetime(2020, 8, 3, 0, 0),
                          datetime.datetime(2020, 8, 4, 0, 0),
                          datetime.datetime(2020, 8, 5, 0, 0),
  "
"1","                        datetime.datetime(2020, 8, 6, 0, 0),
                          datetime.datetime(2020, 8, 7, 0, 0),
                          datetime.datetime(2020, 8, 8, 0, 0),
                          datetime.datetime(2020, 8, 9, 0, 0),
                          datetime.datetime(2020, 8, 10, 0, 0),
                          datetime.datetime(2020, 8, 11, 0, 0),
                          datetime.datetime(2020, 8, 12, 0, 0),
                          datetime.datetime(2020, 8, 13, 0, 0),"
"1","
                          datetime.datetime(2020, 8, 14, 0, 0),
                          datetime.datetime(2020, 8, 15, 0, 0)], dtype=object),
              'xaxis': 'x',
              'y': array([  2. ,   2. ,   2. ,   1. ,   3. ,   4. ,   3. ,   7. ,  12. ,   9. ,
                           10. ,  11. ,  23. ,  15. ,  15. ,  17. ,  21. ,  49. ,  43. ,  54. ,
                           63. ,  75. ,  85. ,  94. , 116. , 129. , 135. , 147. , 149. , 149. ,
                          123. , 129. , 127."
"1"," , 122. , 143. , 157. , 144. , 139. , 123. , 117. ,
                          141. , 138. , 124. , 134. , 158. , 154.5, 151. , 136. , 133. , 121. ,
                          117. , 122. , 125. , 117. , 111. ,  98. ,  94. ,  92. ,  89. ,  73. ,
                           87. ,  91. ,  88. ,  94. ,  90. ,  93. ,  76. ,  60. ,  96. ,  71. ,
                           80. ,  71. ,  63. ,  65. ,  47. ,  74. ,  63. ,  78. ,  68. ,  55. ,
                           48. ,  51. ,  45. ,  48. ,  50. ,  71. ,  48"
"0","fig.show()"
"1",". ,  35. ,  51. ,  69. ,
                           62. ,  64. ,  66. ,  51. ,  59. ,  58. ,  34. ,  57. ,  56. ,  63. ,
                           50. ,  57. ,  63. ,  81. ,  64. ,  70. ,  59. ,  63. ,  75. ,  72. ,
                           70. ,  74. ,  81. ,  78. ,  75. ,  71. , 107. , 113. , 115. , 120. ,
                           87. , 120. , 115. , 116. , 119. , 121. , 133. , 134. , 109. , 125. ,
                          144. , 162. , 147. , 141. , 148. , 154. , 148. , 163. , 160. , 200. ,
 "
"1","                         153. , 221. , 142. , 188. , 194. , 203. , 179. , 199. , 198. , 183. ,
                          188. , 209. , 217. , 229. , 219. , 221. , 215. , 195. , 216. , 212. ,
                          235. , 196. , 226. , 197. , 216. , 208. , 215. , 212. , 185. , 174. ,
                          156. , 132. , 163. , 189. , 184. , 188. , 174. , 169. ]),
              'yaxis': 'y'},
             {'line': {'color': 'red'},
              'mode': 'lines',
              'name': 'Forecast',"
"1","
              'type': 'scatter',
              'x': array([datetime.datetime(2020, 8, 16, 0, 0),
                          datetime.datetime(2020, 8, 17, 0, 0),
                          datetime.datetime(2020, 8, 18, 0, 0),
                          datetime.datetime(2020, 8, 19, 0, 0),
                          datetime.datetime(2020, 8, 20, 0, 0),
                          datetime.datetime(2020, 8, 21, 0, 0),
                          datetime.datetime(2020, 8, 22, 0, 0),
                      "
"1","    datetime.datetime(2020, 8, 23, 0, 0),
                          datetime.datetime(2020, 8, 24, 0, 0),
                          datetime.datetime(2020, 8, 25, 0, 0),
                          datetime.datetime(2020, 8, 26, 0, 0),
                          datetime.datetime(2020, 8, 27, 0, 0),
                          datetime.datetime(2020, 8, 28, 0, 0),
                          datetime.datetime(2020, 8, 29, 0, 0),
                          datetime.datetime(2020, 8, 30, 0, 0),
              "
"1","            datetime.datetime(2020, 8, 31, 0, 0),
                          datetime.datetime(2020, 9, 1, 0, 0),
                          datetime.datetime(2020, 9, 2, 0, 0),
                          datetime.datetime(2020, 9, 3, 0, 0),
                          datetime.datetime(2020, 9, 4, 0, 0),
                          datetime.datetime(2020, 9, 5, 0, 0),
                          datetime.datetime(2020, 9, 6, 0, 0),
                          datetime.datetime(2020, 9, 7, 0, 0),
             "
"1","             datetime.datetime(2020, 9, 8, 0, 0),
                          datetime.datetime(2020, 9, 9, 0, 0),
                          datetime.datetime(2020, 9, 10, 0, 0),
                          datetime.datetime(2020, 9, 11, 0, 0),
                          datetime.datetime(2020, 9, 12, 0, 0),
                          datetime.datetime(2020, 9, 13, 0, 0),
                          datetime.datetime(2020, 9, 14, 0, 0)], dtype=object),
              'y': array([169.9072568 , 168.60006318, 17"
"1","0.90733448, 172.33373547, 164.40717176,
                          168.70776946, 152.83485839, 152.34741987, 159.4231614 , 165.92923627,
                          161.36021835, 161.50703691, 156.58774208, 152.46848144, 151.86035503,
                          150.5531614 , 152.86043271, 154.28683369, 146.36026999, 150.66086768,
                          134.78795662, 134.3005181 , 141.37625963, 147.8823345 , 143.31331657,
                          143.46013514, 138.54084031, 134.42157967, 133.81345325, 1"
"1","32.50625963])}],
    'layout': {'legend': {'tracegroupgap': 0},
               'template': '...',
               'title': {'text': 'Holt-Winters Forecast'},
               'xaxis': {'anchor': 'y', 'domain': [0.0, 1.0], 'title': {'text': 'Date'}},
               'yaxis': {'anchor': 'x', 'domain': [0.0, 1.0], 'title': {'text': 'Deaths'}}}
})
"
